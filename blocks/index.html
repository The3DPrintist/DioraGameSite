<!DOCTYPE html>
<html>

<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="../style.css">
<title>Diora Block Library</title>
</head>

<body>

  <div class="margin">
    <h1>Block Library</h1>
    <p>Almost every block you can use. Some blocks are removed to avoid spoilers!</p>
    <p>Use <code onclick="copyinner(this)">loadblock("block")</code> to load a block by name</p>
    <a href=".." class="btn btn-outline-light" role="button">back to home page</a>
  </div>

  <iframe id="frmFile" src="blocknames.txt" onload="LoadFile();" style="display: none;"></iframe>

  <script>
    function copyinner(element){
      let code = element.innerHTML
      console.log("copied "+code);
      navigator.clipboard.writeText(code);
    }
  </script>

  <script type="text/javascript">
    var count = 0;

    function delay(){
    return new Promise((resolve, reject) => {
      setTimeout(resolve, 1);
    })
    }

    async function LoadFile() {
      var oFrame = document.getElementById("frmFile");
      var strRawContents = oFrame.contentWindow.document.body.childNodes[0].innerHTML;
      while (strRawContents.indexOf("\r") >= 0)
        strRawContents = strRawContents.replace("\r", "");
      var arrLines = strRawContents.split("\n");

      count = arrLines.length;

      for (var i = 0; i < arrLines.length; i++) {
        var curLine = arrLines[i];
        var entries = curLine.split(",");
        
        await addentry(entries[0],entries[1]=="t",entries[2]=="t");
      }
    }

    async function addentry(name,showint,showfx){
      await delay()
      let td1 = '<td class=\"tdi\""><img src=\"blockicons/' + name + '.png\"></td>';
      let td2 = '<td><h2>' + name + '</h2></td>';
      let td3 = '<td><img src=' + ((showint) ? 'inticon' : 'none') + '.png><img src=' + ((showfx) ? 'fxicon' : 'none') + '.png></td>';
      document.getElementById('blocktable').insertAdjacentHTML('beforeend', '<tr>' + td1 + td2 + td3 + "</tr>");
    }
  </script>

  <table id="blocktable">
    <tbody>
      <td><h2>Icon</h2></td>
      <td><h2>Name</h2></td>
      <td><h2>Info</h2></td>
    </tbody>
  </table>

  <div class="margin">
    <a href="#top">
      <button type="submit" class="btn btn-outline-light">â–²</button>
    </a>
  </div>

  <div style="text-align: center;">
    <img src="../art/footer.png" style="margin-left: auto; margin-right: auto;" >
  </div>

</body>
</html>
